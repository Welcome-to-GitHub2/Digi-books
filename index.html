<!DOCTYPE html>
<html>
<head>
    <title>Online Bookstore</title>
    <style>
        /* Basic Styling */
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        nav ul li {
            display: inline;
            margin-right: 20px;
        }
        nav a {
            color: #fff;
            text-decoration: none;
        }
        section {
            padding: 2rem;
        }
        .book-item {
            border: 1px solid #ccc;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .book-item img {
            max-width: 100px;
        }
        .cart-item {
            border: 1px solid #ccc;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .checkout-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <header>
        <h1>Online Bookstore</h1>
    </header>

    <section id="books">
        <h2>Available Books</h2>
    </section>

    <section id="cart">
        <h2>Cart</h2>
        <div id="cart-items"></div>
        <button id="checkout-button" class="checkout-button" onclick="checkout()">Checkout</button>
    </section>

    <section id="checkout" style="display: none;">
        <h2>Checkout</h2>
        <div id="checkout-details">
            <h3>Order Summary:</h3>
            <div id="order-summary-items"></div>
            <p>Total: <span id="order-total"></span></p>
            <p>Name: <input type="text" id="customer-name"></p>
            <p>Email: <input type="email" id="customer-email"></p>
            <p>Address: <textarea id="customer-address"></textarea></p>
            <button onclick="placeOrder()">Place Order</button> 
        </div>
    </section>

    <section id="order-summary" style="display: none;">
        <h2>Order Summary</h2>
        <div id="order-summary-details"></div>
    </section>

    <section id="contact">
        <h2>Contact Us</h2>
        <p>Email: info@ourbookstore.com</p>
        <p>Phone: 456-7890</p>
    </section>

    <script>
        let cart = [];

        // Fetch book data from the given URL
        async function fetchBooks() {
    try {
        const response = await fetch("https://raw.githubusercontent.com/Welcome-to-GitHub2/Digi-books/refs/heads/main/data.json");
        
        if (!response.ok) {
            throw new Error(HTTP error! status: ${response.status});
        }
        
        const books = await response.json();
        displayBooks(books);
    } catch (error) {
        console.error("Error fetching books:", error);
        const booksSection = document.getElementById('books');
        booksSection.innerHTML = <p style="color: red;">Failed to load books. Please try again later.</p>;
    }
}

function displayBooks(books) {
    const booksSection = document.getElementById('books');
    booksSection.innerHTML = '<h2>Available Books</h2>'; // Clear existing content
    
    books.forEach(book => {
        const bookItem = document.createElement('div');
        bookItem.classList.add('book-item');
        bookItem.innerHTML = `
            <img src="${book.image}" alt="${book.title}">
            <h3>${book.title}</h3>
            <p>${book.author}</p>
            <button onclick="addToCart('${book.title}', ${book.price})">Add to Cart</button>
        `;
        booksSection.appendChild(bookItem);
    });
}

// Fetch and display books
fetchBooks();
       /* fetch('https://raw.githubusercontent.com/Welcome-to-GitHub2/Digi-books/refs/heads/main/data.json')
            .then(response => response.json())
            .then(data => {
                displayBooks(data);
            })
            .catch(error => console.error('Error fetching book data:', error));
*/
        // Function to display books
        function displayBooks(books) {
            const booksSection = document.getElementById('books');
            books.forEach(book => {
                const bookItem = document.createElement('div');
                bookItem.classList.add('book-item');
                bookItem.innerHTML = `
                    <img src="${book.image}" alt="${book.title}">
                    <h3>${book.title}</h3>
                    <p>${book.author}</p>
                    <button onclick="addToCart('${book.title}', ${book.price})">Add to Cart</button>
                `;
                booksSection.appendChild(bookItem);
            });
        }

        function addToCart(bookName, price) {
            cart.push({ name: bookName, price: price });
            updateCart();
        }

        function updateCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            cartItemsContainer.innerHTML = ""; 

            let total = 0;
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
                    <p>${item.name} - $${item.price.toFixed(2)}</p>
                    <button onclick="removeFromCart('${item.name}')">Remove</button>
                `;
                cartItemsContainer.appendChild(cartItem);
                total += item.price;
            });

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = "<p>Your cart is empty.</p>";
            }

            document.getElementById('checkout-button').style.display = cart.length > 0 ? 'block' : 'none';
        }

        function removeFromCart(bookName) {
            cart = cart.filter(item => item.name !== bookName);
            updateCart();
        }

        function checkout() {
            const checkoutSection = document.getElementById('checkout');
            checkoutSection.style.display = 'block'; 

            // Clear existing details if any
            document.getElementById('customer-name').value = '';
            document.getElementById('customer-email').value = '';
            document.getElementById('customer-address').value = '';

            // Display order summary items
            const orderSummaryItemsContainer = document.getElementById('order-summary-items');
            orderSummaryItemsContainer.innerHTML = "";

            let total = 0;
            cart.forEach(item => {
                const orderSummaryItem = document.createElement('p');
                orderSummaryItem.textContent = ${item.name} - $${item.price.toFixed(2)};
                orderSummaryItemsContainer.appendChild(orderSummaryItem);
                total += item.price;
            });

            // Display total price
            document.getElementById('order-total').textContent = $${total.toFixed(2)};
        }

        function placeOrder() {
            const customerName = document.getElementById('customer-name').value;
            const customerEmail = document.getElementById('customer-email').value;
            const customerAddress = document.getElementById('customer-address').value;

            if (!customerName || !customerEmail || !customerAddress) {
                alert('Please fill in all the required fields.');
                return;
            }

            alert('Order placed successfully! Thank you, ' + customerName + '.');

            const orderSummarySection = document.getElementById('order-summary');
            const orderSummaryDetails = document.getElementById('order-summary-details');
            orderSummaryDetails.innerHTML = ""; 

            let total = 0;
            cart.forEach(item => {
                orderSummaryDetails.innerHTML += `
                    <p>${item.name} - $${item.price.toFixed(2)}</p>
                `;
                total += item.price;
            });

            orderSummaryDetails.innerHTML += `
                <p>Total: $${total.toFixed(2)}</p>
                <p>Name: ${customerName}</p>
                <p>Email: ${customerEmail}</p>
                <p>Address: ${customerAddress}</p>
            `;

            checkoutSection.style.display = 'none';
            orderSummarySection.style.display = 'block'; 
        }

        updateCart(); 
    </script>
</body>
</html>
